<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="generator" content="Hugo 0.64.1" />

  <title>DevOps and Ransomware &middot; Eric Alexander</title>

  <meta name="description" content="" />

  
  <meta property="og:locale" content="en"/>

  
  <meta property="og:image" content="https://ericalexander.org/profile-bw.png">

  
  <meta property="og:site_name" content="Eric Alexander"/>
  <meta property="og:title" content="DevOps and Ransomware"/>
  <meta property="og:description" content="Mr. Bezos. I’m all in favor of a clean fulfillment center, but tell me: Why do you sweep? Why do you not instead eliminate the source of dirt? - Unknown “insultant”
 Does DevOps pass the “so what?” test? When you start to follow the history of DevOps from Agile, Lean, TOS, TQM, TPS, and beyond; doesn&rsquo;t it lead to plain old critical thinking? Is it anything special? If it&rsquo;s so simple, if anyone can do it, then why on earth would the worlds richest person pay an “insultant” to teach him?"/>
  <meta property="og:url" content="https://ericalexander.org/post/devops-and-ransomware/"/>
  <meta property="og:type" content="article"/>
  <meta property="article:published_time" content="2020-11-15T13:06:13-0700"/>
  <meta property="article:modified_time" content="2020-11-15T13:06:13-0700"/>
  <meta property="article:author" content="Eric Alexander">
  
  
  

  <script type="application/ld+json">
  {
    "@context" : "http://schema.org",
    "@type" : "Blog",
    "name": "Eric Alexander",
    "url" : "https://ericalexander.org/",
    "image": "https://ericalexander.org/profile-bw.png",
    "description": ""
  }
  </script>

  
  <script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "BlogPosting",
    "name": "DevOps and Ransomware",
    "headline": "DevOps and Ransomware",
    "datePublished": "2020-11-15T13:06:13-0700",
    "dateModified": "2020-11-15T13:06:13-0700",
    "author": {
      "@type": "Person",
      "name": "Eric Alexander",
      "url": "https://ericalexander.org/"
    },
    "image": "https://ericalexander.org/profile-bw.png",
    "url": "https://ericalexander.org/post/devops-and-ransomware/",
    "description": "Mr. Bezos. I’m all in favor of a clean fulfillment center, but tell me: Why do you sweep? Why do you not instead eliminate the source of dirt? - Unknown “insultant”\n Does DevOps pass the “so what?” test? When you start to follow the history of DevOps from Agile, Lean, TOS, TQM, TPS, and beyond; doesn\x26rsquo;t it lead to plain old critical thinking? Is it anything special? If it\x26rsquo;s so simple, if anyone can do it, then why on earth would the worlds richest person pay an “insultant” to teach him?"
  }
  </script>
  


  <link type="text/css"
        rel="stylesheet"
        href="https://ericalexander.org/css/print.css"
        media="print">

  <link type="text/css"
        rel="stylesheet"
        href="https://ericalexander.org/css/poole.css">

  <link type="text/css"
        rel="stylesheet"
        href="https://ericalexander.org/css/hyde.css">

  


  

  <link rel="stylesheet"
        href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700&display=swap">

  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css"
        integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk="
        crossorigin="anonymous" />

  <link rel="apple-touch-icon-precomposed"
        sizes="144x144"
        href="/apple-touch-icon-144-precomposed.png">

  <link rel="shortcut icon" href="/favicon.png">

  
  </head>
<body>
  <aside class="sidebar">
  <div class="container">
    <div class="sidebar-about">
      
        
        <div class="author-image">
          <img src="https://ericalexander.org/profile-bw.png" class="img-circle img-headshot center" alt="Profile Picture">
        </div>
        
      

      <h1>Eric Alexander</h1>

      
    </div>

    <nav>
      <ul class="sidebar-nav">
        <li>
          <a href="https://ericalexander.org/">Home</a>
        </li>
        <li>
          <a href="https://ericalexander.org/SecurityNews"> Security News </a>
        </li><li>
          <a href="https://ericalexander.org/SecurityBreach"> Breach Data </a>
        </li>
      </ul>
    </nav>

    <section class="social-icons">
      
      <a href="https://www.linkedin.com/in/ericalexanderorg" rel="me" title="Linkedin">
        <i class="fab fa-linkedin" aria-hidden="true"></i>
      </a>
      
      <a href="https://github.com/ericalexanderorg" rel="me" title="GitHub">
        <i class="fab fa-github" aria-hidden="true"></i>
      </a>
      
      <a href="https://www.reddit.com/user/ericalexander303" rel="me" title="Reddit">
        <i class="fab fa-reddit" aria-hidden="true"></i>
      </a>
      
      <a href="https://twitter.com/ealexand" rel="me" title="Twitter">
        <i class="fab fa-twitter" aria-hidden="true"></i>
      </a>
      
    </section>
  </div>
</aside>


  <main class="content container">
  <div class="post">
  <h1>DevOps and Ransomware</h1>

  <div class="post-date">
    <time datetime="2020-11-15T13:06:13-0700">Nov 15, 2020</time> · 6 min read
  </div>

  <blockquote>
<p>Mr. Bezos. I’m all in favor of a clean fulfillment center, but tell me: Why do you sweep? Why do you not instead eliminate the source of dirt? - Unknown “insultant”</p>
</blockquote>
<p>Does DevOps pass the “so what?” test? When you start to follow the history of DevOps from Agile, Lean, TOS, TQM, TPS, and beyond; doesn&rsquo;t it lead to plain old critical thinking? Is it anything special? If it&rsquo;s so simple, if anyone can do it, then why on earth would the worlds richest person <a href="https://youtu.be/O4MtQGRIIuA?t=1250">pay an “insultant” to teach him</a>? Jeff seems to understand that eliminating waste is important, that you should never pass a defect down the line, but he seems to discard the sweeping question as too abstract, and not useful.</p>
<p>Las Cruces Public Schools (LCPS) may be a perfect example of an organization that’s proud of their ability to <a href="https://www.lcsun-news.com/story/news/education/lcps/2020/11/14/las-cruces-public-schools-what-ransomware-attack-taught-us/6296955002/">scale up sweeping operations in response to a ransomware incident</a>. Why are they so proud of their investment of resources, to deal with ransomware? <a href="http://www.lcps.net/district-overview/">How does that support their mission</a>? Who’s their customer? Ransomware? If DevOps is just critical thinking and LCPS’ value statement is “<a href="http://www.lcps.net/district-overview/">our expectation is that our schools are diverse, equitable, and provide opportunities for the development of critical thinking and democratic ideals</a>”, then shouldn’t we hold them accountable for critical thinking?</p>
<p>Nobody gravitates towards DevOps when everything is working. DevOps isn’t valuable in environments where waste is cheap, it’s valuable where waste isn’t cheap. I’d have to think it’s valuable in any public school system that’s struggling to meet demand within their budget. Maybe it’s too late to help LCPS avoid ransomware, but maybe we can help another school system through a little critical thinking exercise.</p>
<p>Most of what people assume is “DevOps” is just repackaged teaching from an Isreali physicist who wrote a book for the business world in 1984. That book, The Goal, <a href="https://slate.com/business/2012/06/the-goal-eli-goldratts-gripping-thriller-about-operations-theory.html">is still popular in business schools</a>. If there’s one thing Eliyahu Goldratt, the author of The Goal, consistently talks about in all of his teaching, it’s understanding cause and effect. Goldratt advocates for the use of what he calls <a href="https://en.wikipedia.org/wiki/Current_reality_tree_(theory_of_constraints)">Current Reality Tree</a> (CRT) to map out the cause and effect of a problem, the conflict, and where to focus resources on resolution.</p>
<p>Let’s try it out with Ransomware, it may look something like this if we simply map out the cause and effect relationships of what we know about a <a href="https://thedfirreport.com/2020/11/05/ryuk-speed-run-2-hours-to-ransom/">ransomware incident</a>.</p>
<p><img src="/20201115-crt-1.png" alt="simple cause and effect"></p>
<p>Make sense? Now let’s look at a full current reality tree where we go beyond the ransomware incident and start to look at how a ransomware opportunity was created.</p>
<p><img src="/20201115-crt-2.png" alt="full crt">
<a href="/20201115-crt-2.png">Full Image</a></p>
<p>It balloons out when we start to understand all the vectors of how they get on our network, and what they do, once they get there.</p>
<p>Vectors:</p>
<ul>
<li><a href="https://thedfirreport.com/2020/11/05/ryuk-speed-run-2-hours-to-ransom/">Phishing</a></li>
<li><a href="https://blog.malwarebytes.com/security-world/business-security-world/2018/08/protect-rdp-access-ransomware-attacks/">Perimeter System: Compromised Credentials</a></li>
<li><a href="https://www.bleepingcomputer.com/news/security/black-kingdom-ransomware-hacks-networks-with-pulse-vpn-flaws/">Perimeter System: Missing Patch</a></li>
</ul>
<p>Once they get on the network they’ll deploy a <a href="https://www.theregister.com/2020/09/24/cobalt_strike_cisco_talos/">command and control</a> (C&amp;C) tool that enables them to drop additional tools and start hunting domain admins. They’ll search for servers or computers <a href="https://github.com/BloodHoundAD/BloodHound">where they can login, and where the domain admin is logged in</a>. Once they find that system they grab either the domain admin’s password, or their session information (<a href="https://en.wikipedia.org/wiki/Pass_the_hash">just as good as a password</a>), then it’s game over. They now have keys to the kingdom and can delete backups and encrypt systems.</p>
<p>Now that you know how it works, and the cause and effect: Did LCPS eliminate the source of dirt?</p>
<p>This is the only statement that covers what they learned, and how they changed:</p>
<blockquote>
<p>Since then, we have installed firewalls, updated our systems, invested in our teachers and improved our infrastructure so we can protect ourselves.</p>
</blockquote>
<p>If we go back to our current reality tree we can ask:</p>
<ul>
<li>Does a firewall address the conflict points? It’s not clear if they’re talking about a new fancy next-gen perimeter firewall, improved network segregation, or host firewalls. Segregation and host firewalls could help if they prevent the bad actor from logging into a shared system where domain admin is logged in.</li>
<li>Was the problem updated systems? Possible vector if they’re not patching, but it doesn’t address the core conflict.</li>
<li>Invested in our teachers and improved our infrastructure. Great. Keep it up, but it still doesn’t address the core conflict.</li>
</ul>
<p>This is the core conflict:</p>
<p><img src="/20201115-crt-3.png" alt="core conflict"></p>
<p>The number of domain admins is the core conflict. It’s rarely necessary to have any domain admins, but most organizations have much more than zero when it’s easier to give somebody domain admin access, than it is to take the time to give them only the access they need to do their job. Plain old Least Privilege. Plain old <a href="https://www.cisecurity.org/controls/controlled-use-of-administrative-privileges/">#4 on the CIS Top 20 security controls</a>.</p>
<p>Did LCPS go back and fix the core conflict, or are they still passing a defect downline? What should they have done prior to the Ransomware breach? What can you do now? Evaluate your blast radius. Your InfoSec and/or IT teams should be following the advice of <a href="https://adsecurity.org/">adsecurity.org</a>. They should be running tools like <a href="https://github.com/PlumHound/PlumHound">Plumhound</a> or <a href="https://www.guardicore.com/infectionmonkey/">Infection Monkey</a> to understand and reduce blast radius.</p>
<p>You don’t have to be an IT or InfoSec expert to get a glimpse into your ransomware risk. You’re at less risk, possibly near zero, if your organization isn’t using Active Directory; but if they are, you can run the powershell below from your computer to evaluate blast radius.</p>
<pre><code># This will install AD tools on Windows 10
Add-WindowsCapability -Online -Name Rsat.ActiveDirectory.DS-LDS.Tools~~~~0.0.1.0
# This will list all domain admins
Get-ADGroupMember -Identity &quot;Domain Admins&quot; -Recursive | %{Get-ADUser -Identity $_.distinguishedName -properties *} | Select Name, Enabled, LastLogonDate, logonCount, PasswordLastSet
# This will list all enterprise admins
Get-ADGroupMember -Identity &quot;Enterprise Admins&quot; -Recursive | %{Get-ADUser -Identity $_.distinguishedName -properties *} | Select Name, Enabled, LastLogonDate, logonCount, PasswordLastSet
</code></pre>
<p>That powershell will list user accounts ransomware teams are interested in, the ones they’ll go after once they land on your network. Ideally that list is zero. It’s not zero? Shocker! How about passwords? Are they being rotated quickly? Ideally every 7 days or less. What’s the logon count look like? Is it in the hundreds? Ouch, somebody is running around with scissors.</p>
<p>Concerned? Send that output to your IT or InfoSec teams. Ask them if they understand the advice of adsecurity.org or Plumhound. Maybe they have it under control, but maybe they need a little poking to remind them it’s important.</p>
<p>Interested in learning more about the so what of DevOps, and how it applies to Information Security? I’m writing a book. Send me an <a href="mailto:devops.book@ericalexander.org?subject=book&amp;body=Let%20me%20know%20when%20it's%20out">email</a> or connect on <a href="https://www.linkedin.com/in/ericalexanderorg">LinkedIn</a> if you’re interested in the book.</p>

</div>

        




  </main>

  <footer>
  <div class="copyright">
    &copy; Eric Alexander 2020 · 
  </div>
</footer>


  <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/js/all.min.js"
          integrity="sha256-MAgcygDRahs+F/Nk5Vz387whB4kSK9NXlDN3w58LLq0="
          crossorigin="anonymous"></script>

  

  
</body>
</html>
